 /* 
 * USART.c 
 * 
 * Created: 2018-11-09 오전 12:50:55 
 * Author : RRL 
 */  

#define F_CPU 16000000UL
#include <avr/io.h>  
  
void USART_Init(void)  
{  
    UCSR0A=0x00; // clear  
    UCSR0B=(1<<RXEN0) | (1<<TXEN0); // Rx, Tx Enable  
    UCSR0C=(0<<UCSZ02) | (1<<UCSZ01) | (1<<UCSZ00); // Tx data len : 8-bit  
      
    UBRR0H=0;  
    UBRR0L=51; // baudrate 19200  
}  
  
unsigned char USART_Receive(void)  
{  
    while(!(UCSR0A & (1<<RXC0))); // Wait for data to be received  
    return UDR0; // Get and return received data form buffer  
}  
  
void USART_Transmit(unsigned char data)  
{  
    while(!(UCSR0A & (1<<UDRE))); // Wait for empty transmit buffer    
    UDR0=data; // Put data into buffer, sends the  data  
}  

void strTransmit(char *str){
	while (*str){
		USART_Transmit(*str);
		str++;
	}
}  
int main(void)  
{  
    unsigned char data;  
      
    USART_Init();  
      
    while (1)  
    {  
        data=USART_Receive();  
        if(data == '1') {  
            //USART_Transmit('O');  
            //USART_Transmit('N');  
            USART_Transmit(10);  
			strTransmit("On");
        } // ON\n  
          
        if(data == '0') {  
            USART_Transmit('O');  
            USART_Transmit('F');  
            USART_Transmit('F');  
            USART_Transmit(10);
			//strTransmit("Off");
        } // OFF\n  
    }  
}
